{% if not selected_count %}
    <div class="placeholder-card">
        No ingredients selected, please select if you want to make a selection
    </div>

{% elif featured %}
    <div class="rf-feature">

        <div class="rf-top">
            <div class="rf-title">{{ featured.title|default:"Recipe" }}</div>

            <div class="rf-meta">
                <div class="rf-meta-row">
                    <span class="rf-meta-label">Cook time:</span>
                    <span class="rf-meta-value">
            {% if featured.cook_time %}
                {{ featured.cook_time }} min
            {% else %}
                —
            {% endif %}
          </span>
                </div>
            </div>
        </div>

        <div class="rf-main">
            <div class="rf-photo">
                {% if featured.image_url %}
                    <img src="{{ featured.image_url }}" alt="{{ featured.title }}">
                {% else %}
                    <div class="photo-ph">Photo of recipe</div>
                {% endif %}
            </div>

            <div class="rf-side">
                <div class="rf-side-block">
                    <div class="rf-side-title">Cuisine</div>
                    <div class="rf-side-value">{{ featured.cuisine_label }}</div>
                </div>

                <div class="rf-side-block">
                    <div class="rf-side-title">Ingredients</div>

                    {% if featured.ingredient_groups %}
                        {% for grp in featured.ingredient_groups %}
                            {% if grp.items %}
                                <div class="rf-ings-group">
                                    <div class="rf-ings-title">{{ grp.title }}</div>
                                    <div class="rf-ings-chips">
                                        {% for it in grp.items %}
                                            <span class="ing-chip {% if it.is_selected %}is-have{% else %}is-missing{% endif %}">
                        {{ it.name }}
                      </span>
                                        {% endfor %}
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        <div class="placeholder-card">No ingredients data.</div>
                    {% endif %}

                    <div class="rf-ings-meta">
                        Matched: {{ featured.matched_count }} · Missing: {{ featured.missing_count }}
                        {% if featured.missing_required is not None %}
                            · Missing required: {{ featured.missing_required }}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>

        <div class="rf-howto">
            <div class="rf-howto-title">Detail info “How to cook it”</div>

            <div class="rf-howto-body">
                {% if featured.steps %}
                    <ol class="rf-steps">
                        {% for step in featured.steps %}
                            <li>{{ step }}</li>
                        {% endfor %}
                    </ol>
                {% else %}
                    <div class="placeholder-card">
                        No cooking steps available.
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="rf-more">
            <div class="rf-more-head">
                <div class="home-muted">Second, third recipes</div>
                <div class="down-arrow" aria-hidden="true">⬇</div>
            </div>

            <div class="rf-more-list box box-scroll">
                {% for r in more_recipes %}
                    <button
                            type="button"
                            class="recipe-row"
                            hx-get="{% url 'partials_recipes' %}?recipe={{ r.id }}"
                            hx-target="#recipes-panel"
                            hx-include="#filters-form"
                    >
                        <span class="recipe-row-title">{{ r.title|default:"Recipe" }}</span>
                        <span class="recipe-row-hint">open</span>
                    </button>
                {% empty %}
                    <div class="placeholder-card">No more recipes.</div>
                {% endfor %}
            </div>
        </div>

    </div>

{% else %}
    <div class="placeholder-card">
        No recipes found. Try selecting more ingredients or disable strict mode.
    </div>
{% endif %}
