{% extends "base.html" %}
{% load static %}

{% block content %}
    <div class="grid-container">

        <!-- Left column -->
        <div class="left-column">
            <div class="block added-ingredients-block">
                <h3>Selected Ingredients:</h3>
                <ul class="selected-ingredients">
                    {% for ingredient in selected_ingredients %}
                        <li class="ingredient-item">
                            ‚úÖ {{ ingredient.name }}
                            <button class="remove-btn" onclick="removeIngredient('{{ ingredient.name }}')">‚úñ</button>
                        </li>
                    {% empty %}
                        <li class="no-ingredients">‚ùå No ingredients selected yet.</li>
                    {% endfor %}
                </ul>
            </div>

            <div class="block favorite-ingredients-block">
                <h3>Favorite Ingredients</h3>
                <ul class="favorite-ingredients">
                    {% for fav in favorite_ingredients %}
                        <li class="ingredient-item">
                            ‚≠ê {{ fav.ingredients.name }}
                            <button class="remove-btn" onclick="toggleFavorite('{{ fav.ingredients.id }}', false)">‚ùå
                            </button>
                        </li>
                    {% empty %}
                        <li class="no-ingredients">‚ùå You have no favorite ingredients yet.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <!-- Center column: Available Ingredients -->
        <div class="block all-ingredients-block">
            <div class="header-row">
                <h3>Available Ingredients:</h3>
                <button id="toggleView" class="btn">Categories</button>
            </div>

            <div class="semantic-search">
                <input type="text" id="semanticSearchInput" placeholder="Type to search ingredients..."/>
            </div>

            <!-- Pre-populate the UL with all ingredients as <li> -->
            <ul class="all-ingredients-list">
                {% for ing in ingredients %}
                    <li class="available-ingredient"
                        data-name="{{ ing.name }}"
                        data-id="{{ ing.id }}"
                        data-category="{{ ing.category|default:"Uncategorized" }}">
                        {{ ing.name }}
                        <div class="ingredient-buttons">
                            <button class="btn btn-add-small add-ingredient-btn" data-name="{{ ing.name }}">‚ûï</button>
                            <button class="btn btn-favorite favorite-ingredient-btn"
                                    data-is-favorite="false"
                                    data-ingredient-id="{{ ing.id }}">‚≠ê
                            </button>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        </div>

        <!-- Right column -->
        <div class="right-column">
            <div class="block favorite-based-render-block">
                <h3>Suggestions based on favorites</h3>
                <ul class="suggested-dishes">
                    {% for suggestion in favorite_suggestions %}
                        <li>üçΩÔ∏è {{ suggestion }}</li>
                    {% empty %}
                        <li class="no-dishes">‚ùå No suggestions yet.</li>
                    {% endfor %}
                </ul>
            </div>

            <div class="block recipe-based-render-block">
                <h3>Recipes Found:</h3>
                <ul id="recipes-result">
                    {% for recipe in recipes %}
                        <li>
                            <strong>{{ recipe.name }}</strong> (time: {{ recipe.time }} min)
                            <p>{{ recipe.description }}</p>
                        </li>
                    {% empty %}
                        <li class="no-dishes">‚ùå No recipes found.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

    </div>
{% endblock %}
